<!DOCTYPE html>
<html>
    <head>
        <link rel='stylesheet' href='./resources/css/styles.css'>
        <title>Mood Shop</title>
    </head>
    <header class='page-header'>
        <h4>The Mood Shop</h4>
        <nav>
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href='#'>About</a></li>
                <li><a href='#'>Cart</a></li>
            </ul>
        </nav>
    </header>
    <main class='items' id='items'>
        <!--
            Display moods here
        -->
    </main>
    <footer>
        <div id='cart-qty'>
            <!-- cart qty here -->
          </div>
          <ul id='item-list'>
            <!-- cart items -->
          </ul>
          <div id='cart-total'>
            <!-- cart total -->
          </div>
    </footer>
    <body>

        <!-- qty -->
<script src='./resources/js/script.js' type='module'>
    const cart = []
// --------------------------------------------------------
// Add item
    function addItem(name, price) {
        for (let i = 0; i < cart.length; i += 1) {
            if (cart[i].name === name) {
                cart[i].qty += 1
                return
            }
        }
        const item = {name: name, price:price, qty: 1}
        cart.push(item)
    }
// ---------------------------------------------------
    // Show items
    function showItems() {
        const qty = getQty()
        //console.log(`You have ${qty} items in your cart`)
        cartQty.innerHTML = `You have ${qty} items in your cart`

        let itemStr = ''
        for (let i = 0;i < cart.length; i += 1) {
            //console.log(`${cart[i].name} $${cart[i].price} x ${cart[i].qty}`)
            const name = cart[i].name
            const price = cart[i].price
            const qty = cart[i].qty
            const { name, price, qty} = cart[i]

            itemStr +=`<li> ${name} $${price} x ${qty} = ${qty * price}</li>`
        }
        itemList.innerHTML = itemStr


        //console.log(`Total in cart: $${getTotal()}`)
        cartTotal.innerHTML = `Total in cart: $${getTotal()}`
    }
// ------------------------------------------
    // Get quantity
    function  getQty(){
        let qty = 0
        for (let i = 0; i < cart.length; i += 1) {
            qty += cart[i].qty
        return qty
    }
//--------------------------------------------
    // Get total
    function getTotal() {
        let total = 0
        for (i = 0; i < cart.length; i += 1) {
            total += cart[i].price * cart[i].qty
        }
        return total.toFixed(2)


    }
// ------------------------------------------
// Remove item
function removeItem(name) {
    for (let i = 0; i < cart.length; i += 1) {
        if (cart[i].name === name) {
            if (qty > 0) {
                cart[i].qty -= 1
            }
            //cart[i].qty -= 1
            if (cart[i].qty < 1 || qty == 0) {
                cart.splice(i, 1)
            }
            return
        }
    }
}

</script>
    </body>
</html>